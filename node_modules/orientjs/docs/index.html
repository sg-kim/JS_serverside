<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h1>OrientJS driver</h1><p>Official <a href="http://www.orientechnologies.com/orientdb/">orientdb</a> driver for node.js. Fast, lightweight, uses the binary protocol.</p>
<p><a href="https://travis-ci.org/orientechnologies/orientjs"><img src="https://travis-ci.org/orientechnologies/orientjs.svg?branch=master" alt="Build Status"></a>
<a href="https://coveralls.io/github/orientechnologies/orientjs?branch=master"><img src="https://coveralls.io/repos/github/orientechnologies/orientjs/badge.svg?branch=master" alt="Coverage Status"></a>
<a href="https://www.npmjs.com/package/orientjs"><img src="https://img.shields.io/npm/v/orientjs.svg?style=flat-square" alt="npm version"></a>
<a href="https://www.npmjs.com/package/orientjs"><img src="https://img.shields.io/npm/dm/orientjs.svg?style=flat-square" alt="npm downloads"></a></p>
<p>NOTE: <em>Release v2.2 contains big improvement on marshalling by using native C driver</em>.</p>
<h1>Features</h1><ul>
<li>Tested with latest OrientDB (2.1.x and 2.2.x).</li>
<li>Intuitive API, based on <a href="https://github.com/petkaantonov/bluebird">bluebird</a> promises.</li>
<li>Fast binary protocol parser.</li>
<li>Distributed Support</li>
<li>Access multiple databases via the same socket.</li>
<li>Migration support.</li>
<li>Simple CLI.</li>
<li>Connection Pooling</li>
</ul>
<h1>Documentation</h1><p><strong>Main Topics</strong></p>
<ul>
<li><a href="http://orientdb.com/docs/last/OrientJS.html">Introduction</a></li>
<li><a href="http://orientdb.com/docs/last/OrientJS-Server.html">Server API</a></li>
<li><a href="http://orientdb.com/docs/last/OrientJS-Database.html">Database API</a></li>
<li><a href="http://orientdb.com/docs/last/OrientJS-Class.html">Class API</a></li>
<li><a href="http://orientdb.com/docs/last/OrientjS-Index.mdi">Index API</a></li>
<li><a href="http://orientdb.com/docs/last/OrientJS-Functions.html">Function API</a></li>
<li><a href="http://orientdb.com/docs/last/OrientJS-Query.html">Queries</a></li>
<li><a href="http://orientdb.com/docs/last/OrientJS-Transactions.html">Transactions</a></li>
<li><a href="http://orientdb.com/docs/last/OrientJS-Events.html">Events</a></li>
</ul>
<h1>Supported Versions</h1><p>OrientJS aims to work with version 2.0.0 of OrientDB and later. While it may work with earlier versions, they are not currently supported, <a href="./CONTRIBUTING.md">pull requests are welcome!</a></p>
<blockquote>
<p><strong>IMPORTANT</strong>: OrientJS does not currently support OrientDB's Tree Based <a href="https://github.com/orientechnologies/orientdb/wiki/RidBag">RIDBag</a> feature because it relies on making additional network requests.
This means that by default, the result of e.g. <code>JSON.stringify(record)</code> for a record with up to 119 edges will be very different from a record with 120+ edges.
This can lead to very nasty surprises which may not manifest themselves during development but could appear at any time in production.
There is an <a href="https://github.com/orientechnologies/orientdb/issues/2315">open issue</a> for this in OrientDB, until that gets fixed, it is <strong>strongly recommended</strong> that you set <code>RID_BAG_EMBEDDED_TO_SBTREEBONSAI_THRESHOLD</code> to a very large value, e.g. 2147483647.
Please see the <a href="http://www.orientechnologies.com/docs/2.0/orientdb.wiki/RidBag.html#configuration">relevant section in the OrientDB manual</a> for more information.</p>
</blockquote>
<h1>Installation</h1><p>Install via npm.</p>
<pre class="prettyprint source lang-sh"><code>npm install orientjs</code></pre><p>To install OrientJS globally use the <code>-g</code> option:</p>
<pre class="prettyprint source lang-sh"><code>npm install orientjs -g</code></pre><h1>Running Tests</h1><p>To run the test suite, first invoke the following command within the repo, installing the development dependencies:</p>
<pre class="prettyprint source lang-sh"><code>npm install</code></pre><p>Then run the tests:</p>
<pre class="prettyprint source lang-sh"><code>npm test</code></pre><p>##CLI</p>
<p>An extremely minimalist command line interface is provided to allow
databases to created and migrations to be applied via the terminal.</p>
<p>To be useful, OrientJS requires some arguments to authenticate against the server. All operations require the <code>password</code> argument unless the user is configured with an empty password. For operations that involve a specific db, include the <code>dbname</code> argument (with <code>dbuser</code> and <code>dbpassword</code> if they are set to something other than the default).</p>
<p>You can get a list of the supported arguments using <code>orientjs --help</code>.</p>
<pre class="prettyprint source lang-sh"><code>  -d, --cwd         The working directory to use.
  -h, --host        The server hostname or IP address.
  -p, --port        The server port.
  -u, --user        The server username.
  -s, --password    The server password.
  -n, --dbname      The name of the database to use.
  -U, --dbuser      The database username.
  -P, --dbpassword  The database password.
  -?, --help        Show the help screen.</code></pre><p>If it's too tedious to type these options in every time, you can also create an <code>orientjs.opts</code> file containing them. OrientJS will search for this file in the working directory and apply any arguments it contains.
For an example of such a file, see <a href="./test/fixtures/orientjs.opts">test/fixtures/orientjs.opts</a>.</p>
<blockquote>
<p>Note: For brevity, all these examples assume you've installed OrientJS globally (<code>npm install -g orientjs</code>) and have set up an orientjs.opts file with your server and database credentials.</p>
</blockquote>
<h3>Database CLI Commands.</h3><h4>Listing all the databases on the server.</h4><pre class="prettyprint source lang-sh"><code>orientjs db list</code></pre><h4>Creating a new database</h4><pre class="prettyprint source lang-sh"><code>orientjs db create mydb graph plocal</code></pre><h4>Destroying an existing database</h4><pre class="prettyprint source lang-sh"><code>orientjs db drop mydb</code></pre><h3>Migrations</h3><p>OrientJS supports a simple database migration system. This makes it easy to keep track of changes to your orientdb database structure between multiple environments and distributed teams.</p>
<p>When you run a migration command, OrientJS first looks for an orient class called <code>Migration</code>. If this class doesn't exist it will be created.
This class is used to keep track of the migrations that have been applied.</p>
<p>OrientJS then looks for migrations that have not yet been applied in a folder called <code>migrations</code>. Each migration consists of a simple node.js module which exports two methods - <code>up()</code> and <code>down()</code>. Each method receives the currently selected database instance as an argument.</p>
<p>The <code>up()</code> method should perform the migration and the <code>down()</code> method should undo it.</p>
<blockquote>
<p>Note: Migrations can incur data loss! Make sure you back up your database before migrating up and down.</p>
</blockquote>
<p>In addition to the command line options outlined below, it's also possible to use the migration API programatically:</p>
<pre class="prettyprint source lang-js"><code>var db = server.use('mydb');

var manager = new OrientDB.Migration.Manager({
  db: db,
  dir: __dirname + '/migrations'
});

manager.up(1)
.then(function () {
  console.log('migrated up by one!')
});</code></pre><h4>Listing the available migrations</h4><p>To list all the unapplied migrations:</p>
<pre class="prettyprint source lang-sh"><code>orientjs migrate list</code></pre><h4>Creating a new migration</h4><pre class="prettyprint source lang-sh"><code>orientjs migrate create my new migration</code></pre><p>creates a file called something like <code>m20140318_200948_my_new_migration</code> which you should edit to specify the migration up and down methods.</p>
<h4>Migrating up fully</h4><p>To apply all the migrations:</p>
<pre class="prettyprint source lang-sh"><code>orientjs migrate up</code></pre><h4>Migrating up by 1</h4><p>To apply only the first migration:</p>
<pre class="prettyprint source lang-sh"><code>orientjs migrate up 1</code></pre><h4>Migrating down fully</h4><p>To revert all migrations:</p>
<pre class="prettyprint source lang-sh"><code>orientjs migrate down</code></pre><h4>Migrating down by 1</h4><pre class="prettyprint source lang-sh"><code>orientjs migrate down 1</code></pre><p>##Troubleshooting</p>
<ul>
<li>Node exception Maximum call stack size exceeded <a href="https://github.com/orientechnologies/orientjs/issues/116">here</a></li>
</ul>
<h2>History</h2><p>In 2012, <a href="https://github.com/gabipetrovay">Gabriel Petrovay</a> created the original <a href="https://github.com/gabipetrovay/node-orientdb">node-orientdb</a> library, with a straightforward callback based API.</p>
<p>In early 2014, <a href="https://github.com/nitrog7">Giraldo Rosales</a> made a <a href="https://github.com/nitrog7/node-orientdb">whole host of improvements</a>, including support for orientdb 1.7 and switched to a promise based API.</p>
<p>Later in 2014, codemix refactored the library to make it easier to extend and maintain, and introduced an API similar to <a href="https://github.com/dscape/nano">nano</a>. The result is so different from the original codebase that it warranted its own name and npm package. This also gave us the opportunity to switch to semantic versioning.</p>
<p>In June 2015, Orient Technologies company officially adopted the Oriento driver and renamed it as OrientJS.</p>
<h3>Notes for contributors</h3><p>Please see <a href="./CONTRIBUTING.md">CONTRIBUTING</a>.</p>
<h3>Changes</h3><p>See <a href="./CHANGELOG.md">CHANGELOG</a></p>
<h3>License</h3><p>Apache 2.0 License, see <a href="./LICENSE.md">LICENSE</a></p></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="ODatabaseSession.html">ODatabaseSession</a></li><li><a href="OrientDBClient.html">OrientDBClient</a></li></ul><h3>Global</h3><ul><li><a href="global.html#flatten">flatten</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Mon Jun 18 2018 12:08:16 GMT+0200 (CEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>